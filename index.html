<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงููุฑุต ุงูุฏูุงุฑ - ุนุฑุถ ุงููุฌููุนุงุช ุงููุงูู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #8b5cf6; }
        body { font-family: 'Baloo Bhaijaan 2', cursive; overflow-x: hidden; overflow-y: auto; user-select: none; }

        /* ุงูุฎูููุฉ */
        .nature-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 60%, #90EE90 60%, #228B22 100%); z-index: -2; }
        .sun { position: absolute; top: 50px; right: 50px; width: 100px; height: 100px; background: radial-gradient(circle, #FFD700, #FFA500); border-radius: 50%; box-shadow: 0 0 40px #FFD700; animation: sunPulse 4s infinite alternate; }
        @keyframes sunPulse { from { transform: scale(1); } to { transform: scale(1.1); } }
        
        .cloud { position: absolute; background: white; border-radius: 50px; opacity: 0.8; animation: moveCloud linear infinite; }
        .cloud::after, .cloud::before { content: ''; position: absolute; background: white; border-radius: 50%; }
        .c1 { width: 120px; height: 60px; top: 10%; left: -20%; animation-duration: 45s; }
        .c1::after { width: 50px; height: 50px; top: -25px; left: 20px; }
        .c1::before { width: 40px; height: 40px; top: -15px; left: 60px; }
        .c2 { width: 100px; height: 50px; top: 20%; left: -20%; animation-duration: 65s; animation-delay: 5s; transform: scale(0.8); }
        .c2::after { width: 40px; height: 40px; top: -20px; left: 15px; }
        @keyframes moveCloud { 0% { left: -20%; } 100% { left: 120%; } }

        /* ุงูุนูุงุตุฑ */
        .wheel-wrapper { position: relative; filter: drop-shadow(0 20px 10px rgba(0,0,0,0.3)); transition: transform 0.3s; }
        .wheel-wrapper:active { transform: scale(0.98); }
        .wheel-svg { transition: transform 4s cubic-bezier(0.25, 0.1, 0.25, 1); border-radius: 50%; box-shadow: 0 0 0 10px #fbbf24, 0 0 0 20px #f59e0b, inset 0 0 20px rgba(0,0,0,0.5); }
        .pointer-container { position: absolute; top: -30px; left: 50%; transform: translateX(-50%); z-index: 20; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.4)); }
        .glass-panel { background: rgba(255, 255, 255, 0.95); border: 4px solid white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .btn-3d { background: linear-gradient(to bottom, #ef4444, #b91c1c); color: white; border: none; border-radius: 50px; box-shadow: 0 8px 0 #7f1d1d, 0 15px 20px rgba(0,0,0,0.3); transition: all 0.1s; cursor: pointer; }
        .btn-3d:active { transform: translateY(8px); box-shadow: 0 0 0 #7f1d1d, 0 0 0 rgba(0,0,0,0.3); }
        .option-btn { background: white; border: 2px solid #e2e8f0; border-radius: 12px; box-shadow: 0 4px 0 #cbd5e1; transition: all 0.1s; cursor: pointer; }
        .option-btn:active { transform: translateY(4px); box-shadow: 0 0 0; }
        .option-btn.correct { background: #86efac; border-color: #22c55e; box-shadow: 0 4px 0 #15803d; }
        .option-btn.wrong { background: #fca5a5; border-color: #ef4444; box-shadow: 0 4px 0 #b91c1c; }
        .hidden { display: none !important; }
        .confetti { position: fixed; width: 10px; height: 10px; z-index: 100; pointer-events: none; }
        
        .chart-container { display: flex; justify-content: center; align-items: center; margin-bottom: 1rem; background: #fff; border-radius: 15px; padding: 10px; border: 2px solid #e2e8f0; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05); overflow-x: auto; }
        .chart-svg { height: auto; max-height: 250px; width: 100%; max-width: 500px; overflow: visible; }
        
        .axis-line { stroke: #475569; stroke-width: 2; }
        .grid-line { stroke: #e2e8f0; stroke-width: 1; }
        .axis-text { font-size: 11px; fill: #64748b; font-family: sans-serif; font-weight: 500; }
        .bar-val { font-size: 12px; fill: #334155; font-weight: bold; }
        .bar-label { font-size: 13px; fill: #1e293b; font-weight: bold; }
        .q-img-frame { max-height: 180px; border-radius: 10px; margin: 0 auto 10px; display: block; border: 3px solid #e2e8f0; }
    </style>
</head>
<body class="pb-10">

    <div class="nature-bg"><div class="sun"></div><div class="cloud c1"></div><div class="cloud c2"></div></div>
    
    <button id="muteBtn" class="fixed top-4 left-4 z-50 bg-white/80 backdrop-blur p-3 rounded-full shadow-lg text-2xl cursor-pointer hover:scale-110 transition-transform border-2 border-purple-200">๐</button>

    <div id="startScreen" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/40 backdrop-blur-sm p-4 overflow-y-auto">
        <div class="bg-white/95 p-8 md:p-10 rounded-3xl shadow-2xl text-center max-w-2xl w-full border-4 border-yellow-400 m-auto">
            <div class="w-24 h-24 md:w-32 md:h-32 mx-auto mb-6 bg-white rounded-full flex items-center justify-center shadow-lg border-4 border-purple-100 overflow-hidden">
                <img src="logo.png" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3063/3063822.png'" class="w-20 h-20 md:w-24 md:h-24 object-contain">
            </div>
            <h1 class="text-4xl md:text-6xl font-black text-purple-700 mb-2" style="-webkit-text-stroke: 1px white;">ุงููุฑุต ุงูุฏูุงุฑ</h1>
            <p class="text-xl md:text-2xl text-gray-600 mb-8 font-bold">๐ ูุณุงุจูุฉ ุงูุฑูุงุถูุงุช ุงูููุชุนุฉ ๐</p>
            <button id="realStartBtn" class="btn-3d text-2xl md:text-4xl font-black py-3 md:py-4 px-12 w-full">๐ ุงูุทูู!</button>
        </div>
        <footer class="mt-8 text-white font-bold bg-black/30 px-6 py-2 rounded-full mb-4">ุชุตููู ุฃ. ูุญูุฏ ุฎููู</footer>
    </div>

    <div id="gameScreen" class="hidden min-h-screen w-full max-w-7xl mx-auto p-2 md:p-4 flex flex-col md:flex-row gap-6 items-center justify-center">
        <div class="w-full md:w-80 flex flex-col gap-2 md:gap-4 self-start mt-2 md:mt-4">
            
            <div class="glass-panel p-2 md:p-4 text-center bg-yellow-50">
                <p class="text-gray-500 font-bold text-xs md:text-sm">ุงูุฏูุฑ ุนูู:</p>
                <h2 id="currentTeamName" class="text-lg md:text-3xl font-black text-purple-700">ูุฌููุนุฉ 1</h2>
            </div>

            <div class="glass-panel p-2 md:p-4">
                <div class="flex justify-between items-center border-b pb-1 mb-1 md:pb-2 md:mb-2">
                    <h3 class="text-sm md:text-lg font-bold text-gray-700">ุงููุชุงุฆุฌ</h3> <span class="text-lg md:text-2xl">๐</span>
                </div>
                
                <div id="scoreboard" class="grid grid-cols-2 md:grid-cols-1 gap-2 md:gap-2">
                    </div>

                <div class="mt-2 text-center bg-purple-100 rounded-lg p-1 md:p-2 font-bold text-purple-800 text-xs md:text-base">ุงูุณุคุงู: <span id="qNum" class="text-base md:text-xl">1</span> / 32</div>
            </div>
        </div>

        <div class="flex-1 flex flex-col items-center justify-center relative w-full mb-10">
            <div id="wheelSection" class="flex flex-col items-center justify-center transform transition-all duration-500 py-4 md:py-10">
                <div class="wheel-wrapper mb-6 md:mb-8">
                    <div class="pointer-container">
                        <svg width="50" height="60" md:width="60" md:height="70" viewBox="0 0 50 60"><path d="M25 60 L0 0 L50 0 Z" fill="#eab308" stroke="#a16207" stroke-width="3"/><circle cx="25" cy="5" r="5" fill="#713f12"/></svg>
                    </div>
                    <svg id="wheel" class="wheel-svg cursor-pointer w-[250px] h-[250px] md:w-[500px] md:h-[500px]" viewBox="0 0 400 400">
                        <defs><radialGradient id="gradShadow" cx="50%" cy="50%" r="50%" fx="50%" fy="50%"><stop offset="85%" style="stop-color:rgb(0,0,0,0)" /><stop offset="100%" style="stop-color:rgb(0,0,0,0.3)" /></radialGradient></defs>
                        <circle cx="200" cy="200" r="198" fill="#333" /><g id="wheelSegments"></g><circle cx="200" cy="200" r="198" fill="url(#gradShadow)" pointer-events="none"/>
                        <circle cx="200" cy="200" r="50" fill="#f3f4f6" stroke="#9ca3af" stroke-width="2"/><circle cx="200" cy="200" r="40" fill="#ef4444" stroke="#b91c1c" stroke-width="0" style="filter: drop-shadow(0 4px 2px rgba(0,0,0,0.3))"/>
                        <text x="200" y="210" text-anchor="middle" font-size="28" font-weight="900" fill="white" style="text-shadow: 1px 1px 0px #991b1b; pointer-events: none;">ุฃุฏุฑ</text>
                    </svg>
                </div>
                <button onclick="triggerSpin()" class="btn-3d text-lg md:text-2xl font-bold py-3 px-8 md:px-12 animate-bounce">ุงุถุบุท ููุฏูุฑุงู ๐ฒ</button>
            </div>

            <div id="questionSection" class="hidden w-full max-w-3xl transform transition-all duration-500 scale-95 opacity-0">
                <div class="flex justify-center mb-4 md:mb-6">
                    <div class="bg-white rounded-full w-16 h-16 md:w-24 md:h-24 flex items-center justify-center border-4 md:border-8 border-purple-300 shadow-xl relative z-10">
                        <span id="timer" class="text-2xl md:text-4xl font-black text-gray-700">60</span>
                    </div>
                </div>
                <div class="glass-panel p-4 md:p-12 relative -mt-8 md:-mt-12 pt-10 md:pt-16 text-center">
                    <h2 class="text-purple-600 font-bold text-lg md:text-xl mb-2 md:mb-4 bg-purple-50 inline-block px-4 py-1 rounded-full">ุณุคุงู ุงูุชุญุฏู</h2>
                    <img id="qImage" src="" class="q-img-frame hidden">
                    <div id="chartContainer" class="chart-container hidden"></div>
                    <p id="qText" class="text-lg md:text-3xl font-bold text-gray-800 mb-4 md:mb-8 leading-relaxed"></p>
                    <div id="optionsGrid" class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="resultScreen" class="hidden fixed inset-0 z-[60] bg-black/60 backdrop-blur flex items-center justify-center p-4 overflow-y-auto">
        <div class="bg-white p-6 md:p-10 rounded-3xl shadow-2xl text-center max-w-2xl w-full border-4 border-purple-300 m-auto">
            <div class="text-6xl md:text-8xl mb-4 animate-bounce">๐</div>
            <h2 class="text-3xl md:text-5xl font-black text-purple-700 mb-6">ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ</h2>
            <div class="flex justify-center gap-4 md:gap-6 mb-8">
                <div class="bg-green-50 p-2 md:p-4 rounded-xl border-2 border-green-200 w-1/3"><p class="text-green-700 font-bold text-sm md:text-base">โ ุตุญูุญุฉ</p><p id="finalCorrect" class="text-2xl md:text-4xl font-black text-green-600">0</p></div>
                <div class="bg-red-50 p-2 md:p-4 rounded-xl border-2 border-red-200 w-1/3"><p class="text-red-700 font-bold text-sm md:text-base">โ ุฎุงุทุฆุฉ</p><p id="finalWrong" class="text-2xl md:text-4xl font-black text-red-600">0</p></div>
            </div>
            <div id="finalRanking" class="bg-gray-50 p-4 rounded-xl mb-8 space-y-2 text-right border border-gray-200 max-h-40 overflow-y-auto"></div>
            <button onclick="location.reload()" class="btn-3d text-xl md:text-2xl font-bold py-3 px-12 w-full">ูุนุจุฉ ุฌุฏูุฏุฉ ๐</button>
        </div>
    </div>

    <script>
        // ุฅุนุฏุงุฏุงุช ุงูุตูุช
        const audioFiles = { 
            bg: new Audio('https://i.top4top.io/m_3694tdvbo1.mp3'), 
            // ูุง ููุฌุฏ ุตูุช ุฏูุฑุงู spin
            correct: new Audio('https://a.top4top.io/m_36949p7371.mp3'), 
            wrong: new Audio('https://b.top4top.io/m_3694toimd1.mp3') 
        };
        
        audioFiles.bg.loop = true; 
        let isMuted = false;

        function playBackgroundMusic() { 
            if(isMuted) return; 
            if(audioFiles.bg.paused) { 
                audioFiles.bg.play().catch(e => console.log("User interaction needed")); 
            } 
        }
        
        function playSfx(name) { 
            if(isMuted) return; 
            try { 
                if(audioFiles[name]) {
                    audioFiles[name].currentTime = 0; 
                    audioFiles[name].play().catch(e => {}); 
                }
            } catch(e) {} 
        }
        
        function toggleMute() { 
            isMuted = !isMuted; 
            document.getElementById('muteBtn').textContent = isMuted ? '๐' : '๐'; 
            
            Object.values(audioFiles).forEach(audio => {
                audio.muted = isMuted;
            });

            if(isMuted) { 
                audioFiles.bg.pause(); 
            } else { 
                playBackgroundMusic(); 
            } 
        }

        const teams = ['ุงูุฃุจุทุงู ๐ฆ', 'ุงูุนุจุงูุฑุฉ ๐ก', 'ุงููุจุฏุนูู ๐จ', 'ุงููุญุชุฑููู ๐'];
        let rotation = 0; let isSpinning = false;
        
        // ูููุฏุงุช ุงูุฑุณูู (SVG)
        const createBarChart = (data, maxVal) => {
            const chartH = 260, drawH = 200, startX = 50, steps = 5;
            let svg = `<svg viewBox="0 0 380 ${chartH}" class="chart-svg">`;
            const stepVal = maxVal / steps;
            for(let i=0; i<=steps; i++) {
                const val = Math.round(i * stepVal); const y = drawH - (val / maxVal * 180) + 20;
                svg += `<line x1="${startX}" y1="${y}" x2="360" y2="${y}" class="grid-line" />`;
                svg += `<text x="${startX - 8}" y="${y+3}" text-anchor="end" class="axis-text">${val}</text>`;
            }
            svg += `<line x1="${startX}" y1="${drawH+20}" x2="360" y2="${drawH+20}" class="axis-line" />`;
            svg += `<line x1="${startX}" y1="20" x2="${startX}" y2="${drawH+20}" class="axis-line" />`;
            const barWidth = 40, gap = 35;
            data.forEach((d, i) => {
                const height = (d.value / maxVal) * 180; const x = startX + 25 + i * (barWidth + gap); const y = drawH + 20 - height;
                svg += `<rect x="${x}" y="${y}" width="${barWidth}" height="${height}" fill="${d.color}" rx="4" />`;
                svg += `<text x="${x + barWidth/2}" y="${y - 5}" text-anchor="middle" class="bar-val">${d.value}</text>`;
                svg += `<text x="${x + barWidth/2}" y="${drawH + 45}" text-anchor="middle" class="bar-label">${d.label}</text>`;
            });
            svg += `</svg>`; return svg;
        };

        const createTally = (count) => {
            let svg = `<svg viewBox="0 0 200 100" class="chart-svg" style="background:white; border-radius:10px; border:1px solid #e2e8f0;">`;
            svg += `<path d="M40 20 L40 80 M60 20 L60 80 M80 20 L80 80 M100 20 L100 80" stroke="#334155" stroke-width="4" stroke-linecap="round"/>`;
            svg += `<line x1="30" y1="80" x2="110" y2="20" stroke="#ef4444" stroke-width="4" stroke-linecap="round"/>`;
            svg += `<path d="M130 20 L130 80 M150 20 L150 80" stroke="#334155" stroke-width="4" stroke-linecap="round"/>`;
            svg += `</svg>`; return svg;
        };

        const createPicto = (count) => {
            let svg = `<svg viewBox="0 0 300 80" class="chart-svg" style="background:white; border-radius:10px;">`;
            svg += `<text x="150" y="55" font-size="45" text-anchor="middle">๐ ๐</text>`; svg += `</svg>`; return svg;
        }

        const createSpinner = () => {
            let svg = `<svg viewBox="0 0 200 200" class="chart-svg">`;
            svg += `<path d="M100 100 L100 10 A90 90 0 1 1 10 100 Z" fill="#f87171" stroke="#333" stroke-width="2"/>`;
            svg += `<path d="M100 100 L10 100 A90 90 0 0 1 100 10 Z" fill="#60a5fa" stroke="#333" stroke-width="2"/>`;
            svg += `<circle cx="100" cy="100" r="5" fill="black"/>`;
            svg += `<polygon points="100,80 90,100 110,100" fill="black" transform="rotate(45 100 100)"/>`; 
            svg += `</svg>`; return svg;
        }

        const createBag = () => {
             let svg = `<svg viewBox="0 0 200 150" class="chart-svg">`;
             svg += `<path d="M50 140 Q50 150 150 140 Q180 100 150 20 L50 20 Q20 100 50 140" fill="#fcd34d" stroke="#d97706" stroke-width="3"/>`;
             for(let i=0; i<5; i++) svg += `<circle cx="${60 + i*20}" cy="${100 + (i%2)*20}" r="8" fill="#ef4444" stroke="#991b1b"/>`; 
             svg += `<circle cx="90" cy="80" r="8" fill="#3b82f6" stroke="#1e40af"/>`; svg += `<circle cx="120" cy="70" r="8" fill="#3b82f6" stroke="#1e40af"/>`;
             svg += `</svg>`; return svg;
        }

        const questions = [
            { q: "ุฌูุน ููุณู ูุนูููุงุช ุญูู ุฃููุงู ุงูุฏุฑุงุฌุงุช. ุงูุธุฑ ููุฑุณูุ ูุง ุฅุฌูุงูู ุนุฏุฏ ุงูุฏุฑุงุฌุงุชุ", svg: createBarChart([{label:'ุฃุฒุฑู', value:12, color:'#3b82f6'}, {label:'ุฃุญูุฑ', value:8, color:'#ef4444'}], 15), o: ["12", "8", "20", "4"], a: 2 },
            { q: "ุฃู ูู ุงูุทุฑู ุงูุชุงููุฉ ุชูุณุชุฎุฏู ูุฌูุน ุงูุจูุงูุงุช ุงูุฃูููุฉ ูู ุงูุฃุดุฎุงุตุ", o: ["ุงูุฑุณู ุงูุจูุงูู", "ุงูุงุณุชุจูุงู", "ุงููููุงู", "ุงูุงุญุชูุงู"], a: 1 },
            { q: "ูู ุงุณุชุจูุงู ุงููุงููุฉ ุงูููุถูุฉ (ุงูุธุฑ ุงูุฑุณู)ุ ูู ูุฒูุฏ ุนุฏุฏ ูุญุจู ุงููุงูุฌู ุนู ุงูุชูุงุญุ", svg: createBarChart([{label:'ูุงูุฌู', value:15, color:'#facc15'}, {label:'ุชูุงุญ', value:5, color:'#4ade80'}], 20), o: ["5", "10", "15", "20"], a: 1 },
            { q: "ุงูุฃุฏุงุฉ ุงููุณุชุฎุฏูุฉ ูุชูุธูู ุงูุจูุงูุงุช ูุจู ุฑุณููุง ุจูุงููุงู ูู:", o: ["ุงููุณุทุฑุฉ", "ุงูุฏูุงุฑ", "ุงูุฌุฏุงูู", "ุงูููููุฉ"], a: 2 },
            { q: "ุฅุฐุง ูุงูุช ุนูุงูุงุช ุงูุนุฏ ูุณูุงุฑุงุช ุงููุฏุฑุณุฉ ูู ุงูุดูู ุงูุชุงููุ ููุง ุนุฏุฏ ุงูุณูุงุฑุงุชุ", svg: createTally(7), o: ["5", "6", "7", "10"], a: 2 },
            { q: "ูุง ุงููุงุฆุฏุฉ ูู ุงุณุชุฎุฏุงู \"ุงูุงุณุชุจูุงู\" ูู ุงููุฏุฑุณุฉุ", o: ["ููุงุณ ุงูุทูู", "ูุนุฑูุฉ ุขุฑุงุก ุงูุทูุงุจ", "ุญุณุงุจ ุงููุณุงุญุฉ", "ุฑุณู ุงูุฒูุงูุง"], a: 1 },
            { q: "ุฅุฐุง ุฌูุน ุฎุงูุฏ 10 ุฑูุงูุงุช ูุณุนุฏ 5 ุฑูุงูุงุชุ ููุง ูุฌููุน ูุง ุฌูุนู ุงูุงุซูุงูุ", o: ["5", "10", "15", "50"], a: 2 },
            { q: "ูู ุฌุฏูู ุงููุฐุงูุฑุฉุ ุฅุฐุง ุฐุงูุฑ ุณุงูู \"ุงูุฑูุงุถูุงุช ูุงูุนููู\"ุ ูู ุนุฏุฏ ุงูููุงุฏ ุงูุชู ุฐุงูุฑูุงุ", o: ["1", "2", "3", "4"], a: 1 },
            { q: "ุงูุชูุซูู ุงูุจูุงูู ุจุงูุฃุนูุฏุฉ ููุณุชุฎุฏู ูู:", o: ["ููุงุณ ุงูููุช", "ููุงุฑูุฉ ุงูุจูุงูุงุช", "ุงูุงุญุชูุงู ุงููุคูุฏ", "ุงูุถุฑุจ ุงูุฐููู"], a: 1 },
            { q: "ุงูุธุฑ ุงูุฑุณู: ูู ุถุนูุงู ููุซู ุนุฏุฏ ุงูุทูุงุจ ุงูุฐูู ููุถููู ุงูุฌุฑู ููุงุฑูุฉ ุจุงููุฑุงุกุฉุ", svg: createBarChart([{label:'ุฌุฑู', value:12, color:'#fb923c'}, {label:'ูุฑุงุกุฉ', value:4, color:'#a78bfa'}], 15), o: ["ุถุนู ูุงุญุฏ", "ุถุนูุงู", "3 ุฃุถุนุงู", "4 ุฃุถุนุงู"], a: 2 },
            { q: "ุฅุฐุง ูุงู ุนุฏุฏ ููุงููุฏ ุดูุฑ ุฏูุณูุจุฑ ูุณุงูู ุดูุฑ ููููุจุฑุ ููุงู ุดูุฑ ููููุจุฑ 4ุ ููู ููุงููุฏ ุดูุฑ ุฏูุณูุจุฑุ", o: ["2", "4", "8", "12"], a: 1 },
            { q: "ูู ุงูุชูุซูู ุจุงููุตูุฑุงุชุ ุฅุฐุง ูุงู ุงูุฑูุฒ (๐) ููุซู 6 ุณููุงุชุ ููุง ุนุฏุฏ ุงูุณููุงุช ูู ุงูุฑุณู ุฃุฏูุงูุ", svg: createPicto(2), o: ["6", "12", "18", "24"], a: 1 },
            { q: "ุฅุฐุง ุฃุธูุฑ ุงูุฑุณู ุงูุจูุงูู ุนุฏุฏ ุงููุฑุฏุฉ ูุงูุฃููุงูุ ููุง ุฅุฌูุงูู ุงูุญููุงูุงุชุ", svg: createBarChart([{label:'ูุฑุฏุฉ', value:10, color:'#a855f7'}, {label:'ุฃููุงู', value:4, color:'#3b82f6'}], 12), o: ["6", "10", "14", "40"], a: 2 },
            { q: "ูู ุนุฏุฏ ุงูุฃุดุฎุงุต ุงูุฐูู ููุถููู ุชูุฑ 'ุงููุฏููุฉ' ุญุณุจ ุงูุฑุณู ุงูุจูุงููุ", svg: createBarChart([{label:'ุณูุฑู', value:150, color:'#d97706'}, {label:'ุงููุฏููุฉ', value:250, color:'#713f12'},{label:'ุนุฌูุฉ', value:100, color:'#1f2937'}], 300), o: ["50", "100", "150", "250"], a: 3 },
            { q: "ุฅุฐุง ูุงู ุนุฏุฏ ุทูุงุจ ุงูุตู ุงูุฎุงูุณ 16 ุทุงูุจุงู ูุงูุณุงุฏุณ 14ุ ููู ุงูุฅุฌูุงููุ", o: ["16", "14", "30", "2"], a: 2 },
            { q: "ุงููุฑู ุจูู \"ุงูุฃูุซุฑ ุชูุถููุงู\" ู\"ุงูุฃูู ุชูุถููุงู\" ููุญุณุจ ุจุนูููุฉ:", o: ["ุงูุฌูุน", "ุงูุถุฑุจ", "ุงูุทุฑุญ", "ุงููุณูุฉ"], a: 2 },
            { q: "ุฅุฐุง ุนุซุฑ ุฃุญูุฏ ุนูู 5 ุฃุดูุงุก ูุฒูุงุฏ ุนูู 3 ุฃุดูุงุกุ ูู ุนุฏุฏ ุงูุฃุดูุงุก ูุนููุง ูุนุงูุ", o: ["3", "5", "8", "15"], a: 2 },
            { q: "ูู ุงูุฑุณู ุงูุจูุงูู: ุจูู ูุฒูุฏ ูุญุจู ุงููููู ุนู ุงูุนูููุ", svg: createBarChart([{label:'ูููู', value:14, color:'#ec4899'}, {label:'ุนููู', value:10, color:'#22d3ee'}], 20), o: ["2", "4", "10", "14"], a: 1 },
            { q: "ูู ุงูุฑุณู ุงูุจูุงููุ ุงูุนููุฏ ุงูุฃุทูู ูุฏู ุนูู:", o: ["ุงูุฃูู ุนุฏุฏุงู", "ุงูุฃูุซุฑ ุนุฏุฏุงู", "ุงูุตูุฑ", "ุงููุชูุณุท"], a: 1 },
            { q: "ูุง ุงุญุชูุงู ุธููุฑ ุงูุนุฏุฏ \"7\" ุนูุฏ ุฑูู ุญุฌุฑ ูุฑุฏ ุฐู 6 ุฃูุฌูุ", o: ["ูุคูุฏ", "ูุฑุฌุญ", "ูุชุณุงู", "ูุณุชุญูู"], a: 3 },
            { q: "ุงูุธุฑ ููููุณ: ุณุญุจ ูุฑุฉ ุญูุฑุงุก ูู ุญุฏุซ:", svg: createBag(), o: ["ูุณุชุญูู", "ุบูุฑ ูุฑุฌุญ", "ูุฑุฌุญ", "ูุคูุฏ"], a: 2 },
            { q: "ุงุฎุชูุงุฑ ุนุฏุฏ \"ุฒูุฌู\" ูู ุจูู ุงูุฃุนุฏุงุฏ (1ุ 2ุ 3ุ 4) ูุนุชุจุฑ ุงุญุชูุงู:", o: ["ูุคูุฏ", "ูุณุชุญูู", "ูุชุณุงู", "ุบูุฑ ูุฑุฌุญ"], a: 2 },
            { q: "ูุง ูุตู ุงุญุชูุงู ุณุญุจ ุจุทุงูุฉ ุชุญูู ุนุฏุฏุงู ุฃุตุบุฑ ูู 7 ูู ูุฌููุนุฉ ุจุทุงูุงุช (1 ุฅูู 6)ุ", o: ["ุบูุฑ ูุฑุฌุญ", "ูุชุณุงู", "ูุฑุฌุญ", "ูุคูุฏ"], a: 3 },
            { q: "ุนูุฏ ุชุฏููุฑ ุฏูุงุฑ ุจู 4 ุฃุฑูุงู (1,2,3,4)ุ ูุง ุงุญุชูุงู ุชูููู ุนูุฏ ุงูุฑูู \"10\"ุ", o: ["ูุคูุฏ", "ูุฑุฌุญ", "ูุชุณุงู", "ูุณุชุญูู"], a: 3 },
            { q: "ุนูุฏ ุฑูู ุนููุฉ ูุนุฏููุฉุ ูุง ุงุญุชูุงู ุธููุฑ (ุตูุฑุฉ)ุ", o: ["ูุคูุฏ", "ูุณุชุญูู", "ูุชุณุงู", "ูุฑุฌุญ"], a: 2 },
            { q: "ููุณ ุจู 10 ูุฑุงุช ุญูุฑุงุก ููุท. ูุง ุงุญุชูุงู ุณุญุจ ูุฑุฉ ุญูุฑุงุกุ", o: ["ูุณุชุญูู", "ุบูุฑ ูุฑุฌุญ", "ูุชุณุงู", "ูุคูุฏ"], a: 3 },
            { q: "ูุง ุงุญุชูุงู ุฃู ุชุดุฑู ุงูุดูุณ ูู ุงููุบุฑุจุ", o: ["ูุคูุฏ", "ูุฑุฌุญ", "ูุชุณุงู", "ูุณุชุญูู"], a: 3 },
            { q: "ูู ุตูุฏูู ุจู 9 ูุฑุงุช ุตูุฑุงุก ููุฑุฉ ูุงุญุฏุฉ ุฎุถุฑุงุก. ุณุญุจ ูุฑุฉ ุฎุถุฑุงุก ูู ุงุญุชูุงู:", o: ["ูุคูุฏ", "ูุฑุฌุญ", "ุบูุฑ ูุฑุฌุญ", "ูุณุชุญูู"], a: 2 },
            { q: "ุนูุฏ ุฑูู ุญุฌุฑ ูุฑุฏ (1-6)ุ ูุง ุงุญุชูุงู ุธููุฑ ุนุฏุฏ ุฃูุจุฑ ูู 6ุ", o: ["ูุณุชุญูู", "ูุคูุฏ", "ูุชุณุงู", "ูุฑุฌุญ"], a: 0 },
            { q: "ูุฑุต ููุณู ุฅูู 4 ุฃูุณุงู (3 ุฃุญูุฑุ 1 ุฃุฒุฑู). ูููู ุงููุคุดุฑ ุนูู ุงูุฃุญูุฑ ูู ุงุญุชูุงู:", svg: createSpinner(), o: ["ุถุนูู", "ูุฑุฌุญ", "ูุณุชุญูู", "ูุชุณุงู"], a: 1 },
            { q: "ุงุญุชูุงู ุฃู ูููู ููู ุบุฏ ูู ููู (ุงูุฌูุนุฉ) ุจุนุฏ ููู (ุงูุฎููุณ) ูู ุงุญุชูุงู:", o: ["ูุคูุฏ", "ูุณุชุญูู", "ุบูุฑ ูุฑุฌุญ", "ูุชุณุงู"], a: 0 },
            { q: "ุงุฎุชูุงุฑ ุญุฑู (ู) ูู ูููุฉ (ูุญูุฏ) ูู ุงุญุชูุงู:", o: ["ูุคูุฏ", "ูุณุชุญูู", "ูุฑุฌุญ", "ุถุนูู"], a: 2 }
        ];

        let state = { qList: [...questions], currentQ: null, scores: [0,0,0,0], turn: 0, qCount: 0, timer: null };
        const colors = ['#f87171', '#fb923c', '#facc15', '#a3e635', '#4ade80', '#22d3ee', '#60a5fa', '#a78bfa'];

        window.onload = function() {
            document.getElementById('realStartBtn').addEventListener('click', startGame);
            document.getElementById('wheel').addEventListener('click', triggerSpin);
            document.getElementById('muteBtn').addEventListener('click', toggleMute);
        };

        function startGame() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            document.getElementById('gameScreen').style.display = 'flex';
            playBackgroundMusic();
            drawWheel();
            updateUI();
        }

        function drawWheel() {
            const svg = document.getElementById('wheelSegments');
            svg.innerHTML = '';
            const count = Math.min(state.qList.length, 8); 
            if(count === 0) return;
            const slice = 360 / count;
            for(let i=0; i<count; i++) {
                const start = i * slice; const end = (i+1) * slice;
                const x1 = 200 + 198 * Math.cos(Math.PI * (start-90)/180); const y1 = 200 + 198 * Math.sin(Math.PI * (start-90)/180);
                const x2 = 200 + 198 * Math.cos(Math.PI * (end-90)/180); const y2 = 200 + 198 * Math.sin(Math.PI * (end-90)/180);
                const large = slice > 180 ? 1 : 0;
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                path.setAttribute("d", `M200,200 L${x1},${y1} A198,198 0 ${large},1 ${x2},${y2} Z`);
                path.setAttribute("fill", colors[i % colors.length]); path.setAttribute("stroke", "white"); path.setAttribute("stroke-width", "2");
                svg.appendChild(path);
                const mid = start + slice/2;
                const tx = 200 + 150 * Math.cos(Math.PI * (mid-90)/180); const ty = 200 + 150 * Math.sin(Math.PI * (mid-90)/180);
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute("x", tx); text.setAttribute("y", ty); text.setAttribute("text-anchor", "middle"); text.setAttribute("dominant-baseline", "middle");
                text.setAttribute("fill", "white"); text.setAttribute("font-weight", "900"); text.setAttribute("font-size", "24");
                text.style.textShadow = "1px 1px 2px rgba(0,0,0,0.5)"; text.textContent = i+1; svg.appendChild(text);
            }
        }

        function triggerSpin() {
            if(isSpinning || state.qList.length === 0) return;
            isSpinning = true; 
            
            // ุงูุชุฒุงุฒ ุนูุฏ ุจุฏุก ุงูุฏูุฑุงู (ููููุงุชู ุงูุฏุงุนูุฉ)
            if (navigator.vibrate) { navigator.vibrate([30, 50, 30, 50, 30]); }

            const wheel = document.getElementById('wheel');
            const extraSpins = 5 + Math.floor(Math.random() * 5); 
            const count = Math.min(state.qList.length, 8);
            const slice = 360 / count;
            const targetIndex = Math.floor(Math.random() * count); 
            const randomOffset = Math.floor(Math.random() * (slice - 10)) + 5; 
            const targetAngle = (targetIndex * slice) + randomOffset; 
            const spinAmount = (extraSpins * 360) + (360 - targetAngle); 
            rotation += spinAmount;
            wheel.style.transform = `rotate(${rotation}deg)`;
            setTimeout(() => { isSpinning = false; showQuestion(targetIndex); }, 4000);
        }

        function showQuestion(index) {
            const realIndex = index % state.qList.length;
            state.currentQ = state.qList[realIndex];
            state.qList.splice(realIndex, 1);

            const qSection = document.getElementById('questionSection');
            const wheelSection = document.getElementById('wheelSection');
            
            const chartContainer = document.getElementById('chartContainer');
            const qImg = document.getElementById('qImage');
            
            if (state.currentQ.svg) {
                chartContainer.innerHTML = state.currentQ.svg;
                chartContainer.classList.remove('hidden');
                qImg.classList.add('hidden');
            } else if (state.currentQ.img) {
                qImg.src = state.currentQ.img;
                qImg.classList.remove('hidden');
                chartContainer.classList.add('hidden');
            } else {
                chartContainer.classList.add('hidden');
                qImg.classList.add('hidden');
            }

            wheelSection.style.display = 'none'; 
            qSection.classList.remove('hidden');
            setTimeout(() => { qSection.classList.remove('scale-95', 'opacity-0'); qSection.classList.add('scale-100', 'opacity-100'); }, 50);

            document.getElementById('qText').textContent = state.currentQ.q;
            const grid = document.getElementById('optionsGrid'); grid.innerHTML = '';
            state.currentQ.o.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn w-full p-2 md:p-4 text-lg md:text-xl font-bold text-gray-700 text-right h-full';
                btn.textContent = opt; btn.onclick = () => checkAnswer(i, btn); grid.appendChild(btn);
            });
            startTimer();
        }

        function startTimer() {
            let t = 60; document.getElementById('timer').textContent = t;
            if(state.timer) clearInterval(state.timer);
            state.timer = setInterval(() => { t--; document.getElementById('timer').textContent = t; if(t <= 0) { clearInterval(state.timer); resolveAnswer(false); } }, 1000);
        }

        function checkAnswer(idx, btn) {
            clearInterval(state.timer);
            const btns = document.querySelectorAll('.option-btn'); btns.forEach(b => b.disabled = true);
            if(idx === state.currentQ.a) { 
                btn.classList.add('correct'); 
                playSfx('correct'); 
                if(navigator.vibrate) navigator.vibrate(100); // ุงูุชุฒุงุฒ ุฎููู ููุฅุฌุงุจุฉ ุงูุตุญูุญุฉ
                fireConfetti(); 
                state.scores[state.turn]++; 
                resolveAnswer(true); 
            } else { 
                btn.classList.add('wrong'); 
                btns[state.currentQ.a].classList.add('correct'); 
                playSfx('wrong'); 
                if(navigator.vibrate) navigator.vibrate([100, 50, 100]); // ุงูุชุฒุงุฒ ุทููู ููุฎุทุฃ
                resolveAnswer(false); 
            }
        }

        function resolveAnswer(isCorrect) {
            updateUI();
            setTimeout(() => {
                state.qCount++; state.turn = (state.turn + 1) % 4;
                if(state.qList.length === 0 || state.qCount >= 32) { endGame(); } else {
                    const qSection = document.getElementById('questionSection');
                    const wheelSection = document.getElementById('wheelSection');
                    qSection.classList.add('hidden', 'scale-95', 'opacity-0'); qSection.classList.remove('scale-100', 'opacity-100');
                    wheelSection.style.display = 'flex'; document.getElementById('qNum').textContent = state.qCount + 1; updateUI(); drawWheel();
                }
            }, 2500);
        }

        function updateUI() {
            document.getElementById('currentTeamName').textContent = teams[state.turn];
            const board = document.getElementById('scoreboard'); board.innerHTML = '';
            teams.forEach((t, i) => {
                const div = document.createElement('div');
                div.className = `flex justify-between p-2 rounded-lg items-center ${i === state.turn ? 'bg-purple-100 border border-purple-300 font-bold shadow-sm' : 'bg-white border border-gray-100'}`;
                // ุชู ุชุญุณูู ุงูุนุฑุถ ูููุงุณุจ ุงูุดุจูุฉ ุงูุตุบูุฑุฉ
                div.innerHTML = `
                    <div class="flex flex-col items-center w-full">
                        <span class="text-gray-700 text-xs md:text-base font-bold truncate w-full text-center">${t}</span>
                        <span class="bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs md:text-sm font-black mt-1">${state.scores[i]}โ</span>
                    </div>
                `;
                board.appendChild(div);
            });
        }

        function endGame() {
            document.getElementById('gameScreen').classList.add('hidden'); document.getElementById('resultScreen').classList.remove('hidden'); document.getElementById('resultScreen').style.display = 'flex';
            const totalCorrect = state.scores.reduce((a,b)=>a+b,0); const totalWrong = state.qCount - totalCorrect;
            document.getElementById('finalCorrect').textContent = totalCorrect; document.getElementById('finalWrong').textContent = totalWrong;
            const ranking = teams.map((t, i) => ({name: t, s: state.scores[i]})).sort((a,b) => b.s - a.s);
            const rankDiv = document.getElementById('finalRanking'); rankDiv.innerHTML = '';
            ranking.forEach((r, i) => {
                const row = document.createElement('div');
                row.className = 'flex justify-between items-center p-3 border-b border-gray-200 last:border-0';
                row.innerHTML = `<span class="font-bold text-gray-700">${i===0?'๐ ':''}#${i+1} ${r.name}</span> <span class="font-black text-purple-600">${r.s} ููุทุฉ</span>`;
                rankDiv.appendChild(row);
            });
            fireConfetti();
        }

        function fireConfetti() {
            const colors = ['#ef4444', '#3b82f6', '#22c55e', '#fbbf24', '#d946ef'];
            for(let i=0; i<100; i++) {
                const c = document.createElement('div'); c.className = 'confetti'; c.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
                c.style.left = Math.random()*100 + '%'; c.style.top = -10 + 'px'; document.body.appendChild(c);
                const speed = 1 + Math.random() * 3; const angle = Math.random() * 360;
                const anim = c.animate([ { transform: `translate(0, 0) rotate(0deg)`, opacity: 1 }, { transform: `translate(${Math.random()*200 - 100}px, ${window.innerHeight}px) rotate(${angle}deg)`, opacity: 0 } ], { duration: speed * 1000, easing: 'linear' });
                anim.onfinish = () => c.remove();
            }
        }
    </script>
</body>
</html>